<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Guided mental wellness exercises including breathing techniques, mindfulness, and stress reduction activities.">
  <title>Exercises â€” New Horizon</title>
  <link rel="stylesheet" href="../css/base.css">
  <link rel="stylesheet" href="../css/exercises.css">
</head>
<body class="exercises-body">
  <header data-partial="header"></header>

  <main>
    <section class="exercises-hero">
      <h1>Wellness Exercises</h1>
      <p>Short, research-informed activities you can try anytime to support mental wellness.</p>
    </section>

    <section class="exercises-section">
      <div id="exercises-container">
        <p style="text-align: center; padding: 2rem;">Loading exercises...</p>
      </div>
    </section>

    <div class="exercises-back">
      <a class="btn" href="/group8/frontend/index.html">Back to Home</a>
    </div>
  </main>

  <footer data-partial="footer"></footer>
  <script src="../js/config.js"></script>
  <script src="../js/app.js"></script>
  <script src="../js/api.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', loadExercises);

    async function loadExercises() {
      const container = document.getElementById('exercises-container');

      try {
        const data = await API.exercises.getAll();
        const exercises = data.exercises || [];

        if (exercises.length === 0) {
          container.innerHTML = '<p style="text-align: center; padding: 2rem;">No exercises available yet.</p>';
          return;
        }

        container.innerHTML = `
          <ul class="exercises-list">
            ${exercises.map(e => `
              <li class="exercise-item">
                <h3>${escapeHtml(e.name)}</h3>
                ${e.description ? `<p>${escapeHtml(e.description)}</p>` : ''}
                ${e.exercise_url ? `<a href="${e.exercise_url}" target="_blank" class="exercise-link">View Exercise</a>` : ''}
              </li>
            `).join('')}
          </ul>
        `;
      } catch (error) {
        console.error('Error loading exercises:', error);
        container.innerHTML = '<p style="text-align: center; padding: 2rem; color: #c0392b;">Failed to load exercises.</p>';
      }
    }

    function escapeHtml(text) {
      if (!text) return '';
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }
  </script>
</body>
</html>
